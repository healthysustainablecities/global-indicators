# Sensitivity analyses
[Sensitivity analyses](https://en.wikipedia.org/wiki/Sensitivity_analysis) can be performed to evaluate how methodological decisions, such as the way in which a study region boundary has been defined, can influence spatial urban indicator results.  In our example, we used an empirical definition of our study region's urban area.  This is important because administrative boundaries are often broader expanses that may include industrial or rural areas with low or no usual resident population that may impede comparability if we sought to benchmark our results with another city; an empirical or external definition for what is 'urban' can help our results be more comparable.  The impact of this choice should be understood however, and depending on context and the needs of those who would use the indicator data and estimates produced, customisation of boundary definition may be required.

To perform an example sensitivity analysis evaluating the impact of restricting analysis using an empirically identified urban area (Figure 11):
  - take a copy of the 'example_ES_Las_Palmas_2023.yml' file and save it as `ES_Las_Palmas_2023_test_not_urbanx`.
  - Open this file in a text editor and
    - modify the entry under study_region_boundary reading `ghsl_urban_intersection: true` to `ghsl_urban_intersection: false`
    - modify the value of the parameter entry for 'notes' (line 57) to read "This supplementary configuration file for the broader administrative boundary region of Las Palma allows the impact of restricting the analysis to the urban region (as per the main example) to be evaluated."
  - now, exit the application (click the button in the top right-hand corner) and restart the application
  - select the new region and perform the analysis and generate resources steps
  - select the `example_ES_Las_Palmas_2023` study region and navigate to the `Compare` tab
  - select the `ES_Las_Palmas_2023_test_not_urbanx` region from the comparison drop down menu and click `Compare study regions` to generate a comparison CSV in the example study region's output folder (`process\data\_study_region_outputs\example_ES_Las_Palmas_2023`) and display a table with side-by-side comparison of the overall region statistics and indicator estimates in the app window:

![image](https://github.com/healthysustainablecities/global-indicators/assets/12984626/c95e1ab4-3d89-49a6-86cb-61718f83dde5)
*Figure 11. A summary of core indicators can be generated; values are rounded for display purposes, but the comparison analysis also generates a dated CSV file located in the output folder of the selected reference region with un-rounded values.*

This technique can be used to summarise the overall impacts of a range of choices and assumptions relating to the choice of data and parameters to be used in the analysis.  Users are encouraged to also examine the generated spatial indicator layers using a Desktop GIS software like QGIS to evaluate the appropriateness of data inputs and the results arising from how study regions have been configured.

*Analogously, the same technique could be applied to compare the change in results when using data that has been modified to represent some kind of scenario or intervention and evaluate its impact on relevant urban indicators.*


# Policy checklist

A [policy checklist](https://github.com/healthysustainablecities/global-indicators/raw/refs/heads/main/process/data/policy_review/gohsc-policy-indicator-checklist.xlsx) tool has been developed to support the [1000 Cities Challenge](https://www.healthysustainablecities.org/1000cities). 
For more information on the concepts underlying the tool, see: Lowe, M., Adlakha D., et al. (2022). City planning policies to support health and sustainability: an international comparison of policy indicators for 25 cities. The Lancet Global Health, May 2022. https://doi.org/10.1016/S2214-109X(22)00069-9.

Once the policy checklist has been completed, the [results can be summarised, queried and generated into a PDF report](./5.-Detailed-Setup#policy-checklist-data) using the GHSCI web app (Figures 12 and 13).

![image](https://github.com/user-attachments/assets/7ca7c444-add6-4762-bfda-796ed2a7b9d3)    
*Figure 12. Select and load a completed policy indicator checklist*

![image](https://github.com/user-attachments/assets/2fbd2018-09fb-4aa5-9efc-590bac967518)   
*Figure 13. Query a completed policy checklist for key phrases, and generate a summary PDF document*

An example policy analysis has not yet been provided for Las Palmas.  The policy review instrument has recently been updated, and subsequent updates to the software will accommodate this in the reporting templates.

# Monitoring progress

Whichever way you choose to use the software, additional output will be displayed that can contain useful information about what is happening following configuration, analysis, generating resources and performing comparisons.  When using the web app, you may like to 'snap' the terminal window to the left of your screen and your web browser to the right to view both side-by-side.

If anything goes wrong (e.g. you tried to run the analysis for a city that hasn't been fully or correctly configured; see "[What if I get stuck](./#What-if-I-get-stuck)"), the process will stop and indicate some kind of error.  

# Command line usage

As an alternative to running the GHSCI software workflow using the [web app](./#Web-app) as demonstrated in the examples above, or [Jupyter Lab](./#Jupyter-Lab), users also have the option to initialise study region configurations, perform analyses, generate resources and comparisons using simple command-line arguments:

Initialise a new study region by entering `configure` followed by a codename for your study region (e.g. `configure example_ES_Las_Palmas_2023`).  If the command is run without a codename, usage instructions will be displayed.  Once a new study region has been initialised, you will be directed to open the newly generated study region configuration file in a text editor and complete details for your city.  

For now, we can proceed with analysis for the example city, [Las Palmas de Gran Canaria](https://en.wikipedia.org/wiki/Las_Palmas) using the provided example.  We refer to cities using [codenames](#Codenames) to avoid ambiguity when identifying study regions.  For example, you may want to analyse Las Palmas in both 2023 as well as 2024; or you may be interested in Valencia in Venezuela  (e.g. VE_Valencia_2023) as well as Valencia in Spain (ES_Valencia_2023). For Las Palmas, we use the codename `example_ES_Las_Palmas_2023`. 

To see the list of codenames for configured cities (Figure 14), enter the commands `configure`, `analysis` or `generate` without providing a codename.  For more detailed help on these commands, enter `help`.

![image](https://github.com/user-attachments/assets/aa2852a9-c846-46ae-b60f-76d781624dbd)    
*Figure 14. The codenames for configured cities can be viewed by running `analysis`.*

An analysis can now be performed (Figure 15), drawing on the study region configuration file that summarises locations and details for the data that you have retrieved and stored in the data subfolders.  For our example city, enter, `analysis example_ES_Las_Palmas_2023`.  

![image](https://github.com/user-attachments/assets/605c2260-46a5-4445-af84-31dd7d9c7109)    
*Figure 15. Running neighbourhood analysis for Las Palmas by entering `analysis example_ES_Las_Palmas_2023.py`.*

Resources including maps, figures and reports can be generated by entering `generate example_ES_Las_Palmas_2023` (or the codename for another city, once you source its data, initialise and complete its configuration, and complete the analysis process; Figure 16). 

![image](https://github.com/user-attachments/assets/6ae62b95-69f8-4c34-a0fb-c931f5c824bf)    
*Figure 16. The output of successful report generation for Las Palmas, which also provides the path to find the output PDF file(s).*

[&larr;](./6.-Data) [&uarr;]() [&rarr;](./8.-Useful-Links-and-Resources)
